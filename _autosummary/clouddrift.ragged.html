
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>clouddrift.ragged &#8212; CloudDrift  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=35a8b989"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_autosummary/clouddrift.ragged';</script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="clouddrift.ragged.apply_ragged" href="clouddrift.ragged.apply_ragged.html" />
    <link rel="prev" title="clouddrift.plotting.plot_ragged" href="clouddrift.plotting.plot_ragged.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="CloudDrift  documentation - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="CloudDrift  documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>

<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datasets.html">Datasets</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://github.com/Cloud-Drift/clouddrift/blob/main/CONTRIBUTING.md">Contributing</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../api.html">API</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="clouddrift.adapters.html">clouddrift.adapters</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="clouddrift.adapters.andro.html">clouddrift.adapters.andro</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.andro.to_xarray.html">clouddrift.adapters.andro.to_xarray</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="clouddrift.adapters.gdp.html">clouddrift.adapters.gdp</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.gdp.cast_float64_variables_to_float32.html">clouddrift.adapters.gdp.cast_float64_variables_to_float32</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.gdp.cut_str.html">clouddrift.adapters.gdp.cut_str</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.gdp.decode_date.html">clouddrift.adapters.gdp.decode_date</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.gdp.drogue_presence.html">clouddrift.adapters.gdp.drogue_presence</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.gdp.fetch_netcdf.html">clouddrift.adapters.gdp.fetch_netcdf</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.gdp.fill_values.html">clouddrift.adapters.gdp.fill_values</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.gdp.get_gdp_metadata.html">clouddrift.adapters.gdp.get_gdp_metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.gdp.order_by_date.html">clouddrift.adapters.gdp.order_by_date</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.gdp.parse_directory_file.html">clouddrift.adapters.gdp.parse_directory_file</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.gdp.rowsize.html">clouddrift.adapters.gdp.rowsize</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.gdp.str_to_float.html">clouddrift.adapters.gdp.str_to_float</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.gdp.gdp1h.html">clouddrift.adapters.gdp.gdp1h</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.gdp.gdp6h.html">clouddrift.adapters.gdp.gdp6h</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.gdp.gdpsource.html">clouddrift.adapters.gdp.gdpsource</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="clouddrift.adapters.glad.html">clouddrift.adapters.glad</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.glad.get_dataframe.html">clouddrift.adapters.glad.get_dataframe</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.glad.to_xarray.html">clouddrift.adapters.glad.to_xarray</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="clouddrift.adapters.hurdat2.html">clouddrift.adapters.hurdat2</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.hurdat2.to_raggedarray.html">clouddrift.adapters.hurdat2.to_raggedarray</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.hurdat2.DataLine.html">clouddrift.adapters.hurdat2.DataLine</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.hurdat2.HeaderLine.html">clouddrift.adapters.hurdat2.HeaderLine</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.hurdat2.RecordIdentifier.html">clouddrift.adapters.hurdat2.RecordIdentifier</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.hurdat2.SystemStatus.html">clouddrift.adapters.hurdat2.SystemStatus</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.hurdat2.TrackData.html">clouddrift.adapters.hurdat2.TrackData</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="clouddrift.adapters.ibtracs.html">clouddrift.adapters.ibtracs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.ibtracs.to_raggedarray.html">clouddrift.adapters.ibtracs.to_raggedarray</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="clouddrift.adapters.mosaic.html">clouddrift.adapters.mosaic</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.mosaic.get_dataframes.html">clouddrift.adapters.mosaic.get_dataframes</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.mosaic.get_file_urls.html">clouddrift.adapters.mosaic.get_file_urls</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.mosaic.get_repository_metadata.html">clouddrift.adapters.mosaic.get_repository_metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.mosaic.to_xarray.html">clouddrift.adapters.mosaic.to_xarray</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="clouddrift.adapters.subsurface_floats.html">clouddrift.adapters.subsurface_floats</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.subsurface_floats.download.html">clouddrift.adapters.subsurface_floats.download</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.subsurface_floats.to_xarray.html">clouddrift.adapters.subsurface_floats.to_xarray</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="clouddrift.adapters.utils.html">clouddrift.adapters.utils</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.utils.download_with_progress.html">clouddrift.adapters.utils.download_with_progress</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="clouddrift.adapters.yomaha.html">clouddrift.adapters.yomaha</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.yomaha.download.html">clouddrift.adapters.yomaha.download</a></li>
<li class="toctree-l4"><a class="reference internal" href="clouddrift.adapters.yomaha.to_xarray.html">clouddrift.adapters.yomaha.to_xarray</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="clouddrift.binning.html">clouddrift.binning</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.binning.binned_statistics.html">clouddrift.binning.binned_statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.binning.handle_datetime_conversion.html">clouddrift.binning.handle_datetime_conversion</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="clouddrift.datasets.html">clouddrift.datasets</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.datasets.andro.html">clouddrift.datasets.andro</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.datasets.gdp1h.html">clouddrift.datasets.gdp1h</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.datasets.gdp6h.html">clouddrift.datasets.gdp6h</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.datasets.gdp_source.html">clouddrift.datasets.gdp_source</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.datasets.glad.html">clouddrift.datasets.glad</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.datasets.hurdat2.html">clouddrift.datasets.hurdat2</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.datasets.ibtracs.html">clouddrift.datasets.ibtracs</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.datasets.mosaic.html">clouddrift.datasets.mosaic</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.datasets.spotters.html">clouddrift.datasets.spotters</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.datasets.subsurface_floats.html">clouddrift.datasets.subsurface_floats</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.datasets.yomaha.html">clouddrift.datasets.yomaha</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="clouddrift.kinematics.html">clouddrift.kinematics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.kinematics.inertial_oscillation_from_position.html">clouddrift.kinematics.inertial_oscillation_from_position</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.kinematics.kinetic_energy.html">clouddrift.kinematics.kinetic_energy</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.kinematics.position_from_velocity.html">clouddrift.kinematics.position_from_velocity</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.kinematics.residual_position_from_displacement.html">clouddrift.kinematics.residual_position_from_displacement</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.kinematics.spin.html">clouddrift.kinematics.spin</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.kinematics.velocity_from_position.html">clouddrift.kinematics.velocity_from_position</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="clouddrift.pairs.html">clouddrift.pairs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.pairs.chance_pair.html">clouddrift.pairs.chance_pair</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.pairs.chance_pairs_from_ragged.html">clouddrift.pairs.chance_pairs_from_ragged</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.pairs.pair_bounding_box_overlap.html">clouddrift.pairs.pair_bounding_box_overlap</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.pairs.pair_space_distance.html">clouddrift.pairs.pair_space_distance</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.pairs.pair_time_distance.html">clouddrift.pairs.pair_time_distance</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.pairs.pair_time_overlap.html">clouddrift.pairs.pair_time_overlap</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="clouddrift.plotting.html">clouddrift.plotting</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.plotting.plot_ragged.html">clouddrift.plotting.plot_ragged</a></li>
</ul>
</details></li>
<li class="toctree-l2 current active has-children"><a class="current reference internal" href="#">clouddrift.ragged</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.ragged.apply_ragged.html">clouddrift.ragged.apply_ragged</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.ragged.chunk.html">clouddrift.ragged.chunk</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.ragged.obs_index_to_row.html">clouddrift.ragged.obs_index_to_row</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.ragged.prune.html">clouddrift.ragged.prune</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.ragged.ragged_to_regular.html">clouddrift.ragged.ragged_to_regular</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.ragged.regular_to_ragged.html">clouddrift.ragged.regular_to_ragged</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.ragged.rowsize_to_index.html">clouddrift.ragged.rowsize_to_index</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.ragged.segment.html">clouddrift.ragged.segment</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.ragged.subset.html">clouddrift.ragged.subset</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.ragged.unpack.html">clouddrift.ragged.unpack</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="clouddrift.raggedarray.html">clouddrift.raggedarray</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.raggedarray.RaggedArray.html">clouddrift.raggedarray.RaggedArray</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="clouddrift.signal.html">clouddrift.signal</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.signal.analytic_signal.html">clouddrift.signal.analytic_signal</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.signal.cartesian_to_rotary.html">clouddrift.signal.cartesian_to_rotary</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.signal.ellipse_parameters.html">clouddrift.signal.ellipse_parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.signal.modulated_ellipse_signal.html">clouddrift.signal.modulated_ellipse_signal</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.signal.rotary_to_cartesian.html">clouddrift.signal.rotary_to_cartesian</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="clouddrift.sphere.html">clouddrift.sphere</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.sphere.bearing.html">clouddrift.sphere.bearing</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.sphere.cartesian_to_spherical.html">clouddrift.sphere.cartesian_to_spherical</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.sphere.cartesian_to_tangentplane.html">clouddrift.sphere.cartesian_to_tangentplane</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.sphere.coriolis_frequency.html">clouddrift.sphere.coriolis_frequency</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.sphere.cumulative_distance.html">clouddrift.sphere.cumulative_distance</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.sphere.distance.html">clouddrift.sphere.distance</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.sphere.plane_to_sphere.html">clouddrift.sphere.plane_to_sphere</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.sphere.position_from_distance_and_bearing.html">clouddrift.sphere.position_from_distance_and_bearing</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.sphere.recast_lon.html">clouddrift.sphere.recast_lon</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.sphere.recast_lon180.html">clouddrift.sphere.recast_lon180</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.sphere.recast_lon360.html">clouddrift.sphere.recast_lon360</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.sphere.sphere_to_plane.html">clouddrift.sphere.sphere_to_plane</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.sphere.spherical_to_cartesian.html">clouddrift.sphere.spherical_to_cartesian</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.sphere.tangentplane_to_cartesian.html">clouddrift.sphere.tangentplane_to_cartesian</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="clouddrift.wavelet.html">clouddrift.wavelet</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.wavelet.morse_amplitude.html">clouddrift.wavelet.morse_amplitude</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.wavelet.morse_freq.html">clouddrift.wavelet.morse_freq</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.wavelet.morse_logspace_freq.html">clouddrift.wavelet.morse_logspace_freq</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.wavelet.morse_properties.html">clouddrift.wavelet.morse_properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.wavelet.morse_wavelet.html">clouddrift.wavelet.morse_wavelet</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.wavelet.morse_wavelet_transform.html">clouddrift.wavelet.morse_wavelet_transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="clouddrift.wavelet.wavelet_transform.html">clouddrift.wavelet.wavelet_transform</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/_autosummary/clouddrift.ragged.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>clouddrift.ragged</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.apply_ragged"><code class="docutils literal notranslate"><span class="pre">apply_ragged()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.chunk"><code class="docutils literal notranslate"><span class="pre">chunk()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.obs_index_to_row"><code class="docutils literal notranslate"><span class="pre">obs_index_to_row()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.prune"><code class="docutils literal notranslate"><span class="pre">prune()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.ragged_to_regular"><code class="docutils literal notranslate"><span class="pre">ragged_to_regular()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.regular_to_ragged"><code class="docutils literal notranslate"><span class="pre">regular_to_ragged()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.rowsize_to_index"><code class="docutils literal notranslate"><span class="pre">rowsize_to_index()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.segment"><code class="docutils literal notranslate"><span class="pre">segment()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.subset"><code class="docutils literal notranslate"><span class="pre">subset()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.unpack"><code class="docutils literal notranslate"><span class="pre">unpack()</span></code></a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="module-clouddrift.ragged">
<span id="clouddrift-ragged"></span><h1>clouddrift.ragged<a class="headerlink" href="#module-clouddrift.ragged" title="Link to this heading">#</a></h1>
<p>Transformational and inquiry functions for ragged arrays.</p>
<p class="rubric">Functions</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="clouddrift.ragged.apply_ragged.html#clouddrift.ragged.apply_ragged" title="clouddrift.ragged.apply_ragged"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_ragged</span></code></a>(func, arrays, rowsize, *args[, ...])</p></td>
<td><p>Apply a function to a ragged array.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="clouddrift.ragged.chunk.html#clouddrift.ragged.chunk" title="clouddrift.ragged.chunk"><code class="xref py py-obj docutils literal notranslate"><span class="pre">chunk</span></code></a>(x, length[, overlap, align])</p></td>
<td><p>Divide an array <code class="docutils literal notranslate"><span class="pre">x</span></code> into equal chunks of length <code class="docutils literal notranslate"><span class="pre">length</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="clouddrift.ragged.obs_index_to_row.html#clouddrift.ragged.obs_index_to_row" title="clouddrift.ragged.obs_index_to_row"><code class="xref py py-obj docutils literal notranslate"><span class="pre">obs_index_to_row</span></code></a>(index, rowsize)</p></td>
<td><p>Obtain a list of row indices from a list of observation indices of a ragged array.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="clouddrift.ragged.prune.html#clouddrift.ragged.prune" title="clouddrift.ragged.prune"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prune</span></code></a>(ragged, rowsize, min_rowsize)</p></td>
<td><p>Within a ragged array, removes arrays less than a specified row size.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="clouddrift.ragged.ragged_to_regular.html#clouddrift.ragged.ragged_to_regular" title="clouddrift.ragged.ragged_to_regular"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ragged_to_regular</span></code></a>(ragged, rowsize[, fill_value])</p></td>
<td><p>Convert a ragged array to a two-dimensional array such that each contiguous segment of a ragged array is a row in the two-dimensional array.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="clouddrift.ragged.regular_to_ragged.html#clouddrift.ragged.regular_to_ragged" title="clouddrift.ragged.regular_to_ragged"><code class="xref py py-obj docutils literal notranslate"><span class="pre">regular_to_ragged</span></code></a>(array[, fill_value])</p></td>
<td><p>Convert a two-dimensional array to a ragged array.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="clouddrift.ragged.rowsize_to_index.html#clouddrift.ragged.rowsize_to_index" title="clouddrift.ragged.rowsize_to_index"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rowsize_to_index</span></code></a>(rowsize)</p></td>
<td><p>Convert a list of row sizes to a list of indices.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="clouddrift.ragged.segment.html#clouddrift.ragged.segment" title="clouddrift.ragged.segment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">segment</span></code></a>(x, tolerance[, rowsize])</p></td>
<td><p>Divide an array into segments based on a tolerance value.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="clouddrift.ragged.subset.html#clouddrift.ragged.subset" title="clouddrift.ragged.subset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subset</span></code></a>(ds, criteria[, id_var_name, ...])</p></td>
<td><p>Subset a ragged array xarray dataset as a function of one or more criteria.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="clouddrift.ragged.unpack.html#clouddrift.ragged.unpack" title="clouddrift.ragged.unpack"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unpack</span></code></a>(ragged_array, rowsize[, rows, axis])</p></td>
<td><p>Unpack a ragged array into a list of regular arrays.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="clouddrift.ragged.apply_ragged">
<span class="sig-prename descclassname"><span class="pre">clouddrift.ragged.</span></span><span class="sig-name descname"><span class="pre">apply_ragged</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func:</span> <span class="pre">callable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrays:</span> <span class="pre">list[~numpy.ndarray</span> <span class="pre">|</span> <span class="pre">~xarray.core.dataarray.DataArray]</span> <span class="pre">|</span> <span class="pre">~numpy.ndarray</span> <span class="pre">|</span> <span class="pre">~xarray.core.dataarray.DataArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rowsize:</span> <span class="pre">list[int]</span> <span class="pre">|</span> <span class="pre">~numpy.ndarray[int]</span> <span class="pre">|</span> <span class="pre">~xarray.core.dataarray.DataArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*args:</span> <span class="pre">tuple</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rows:</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">~collections.abc.Iterable[int]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">executor:</span> <span class="pre">~concurrent.futures._base.Executor</span> <span class="pre">=</span> <span class="pre">&lt;concurrent.futures.thread.ThreadPoolExecutor</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs:</span> <span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/clouddrift/ragged.html#apply_ragged"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clouddrift.ragged.apply_ragged" title="Link to this definition">#</a></dt>
<dd><p>Apply a function to a ragged array.</p>
<p>The function <code class="docutils literal notranslate"><span class="pre">func</span></code> will be applied to each contiguous row of <code class="docutils literal notranslate"><span class="pre">arrays</span></code> as
indicated by row sizes <code class="docutils literal notranslate"><span class="pre">rowsize</span></code>. The output of <code class="docutils literal notranslate"><span class="pre">func</span></code> will be
concatenated into a single ragged array.</p>
<p>You can pass <code class="docutils literal notranslate"><span class="pre">arrays</span></code> as NumPy arrays or xarray DataArrays, however,
the result will always be a NumPy array. Passing <code class="docutils literal notranslate"><span class="pre">rows</span></code> as an integer or
a sequence of integers will make <code class="docutils literal notranslate"><span class="pre">apply_ragged</span></code> process and return only
those specific rows, and otherwise, all rows in the input ragged array will
be processed. Further, you can use the <code class="docutils literal notranslate"><span class="pre">axis</span></code> parameter to specify the
ragged axis of the input array(s) (default is 0).</p>
<p>By default this function uses <code class="docutils literal notranslate"><span class="pre">concurrent.futures.ThreadPoolExecutor</span></code> to
run <code class="docutils literal notranslate"><span class="pre">func</span></code> in multiple threads. The number of threads can be controlled by
passing the <code class="docutils literal notranslate"><span class="pre">max_workers</span></code> argument to the executor instance passed to
<code class="docutils literal notranslate"><span class="pre">apply_ragged</span></code>. Alternatively, you can pass the <code class="docutils literal notranslate"><span class="pre">concurrent.futures.ProcessPoolExecutor</span></code>
instance to use processes instead. Passing alternative (3rd party library)
concurrent executors may work if they follow the same executor interface as
that of <code class="docutils literal notranslate"><span class="pre">concurrent.futures</span></code>, however this has not been tested yet.</p>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>func<span class="classifier">callable</span></dt><dd><p>Function to apply to each row of each ragged array in <code class="docutils literal notranslate"><span class="pre">arrays</span></code>.</p>
</dd>
<dt>arrays<span class="classifier">list[np.ndarray] or np.ndarray or xr.DataArray</span></dt><dd><p>An array or a list of arrays to apply <code class="docutils literal notranslate"><span class="pre">func</span></code> to.</p>
</dd>
<dt>rowsize<span class="classifier">list[int] or np.ndarray[int] or xr.DataArray[int]</span></dt><dd><p>List of integers specifying the number of data points in each row.</p>
</dd>
<dt><a href="#id1"><span class="problematic" id="id2">*</span></a>args<span class="classifier">tuple</span></dt><dd><p>Additional arguments to pass to <code class="docutils literal notranslate"><span class="pre">func</span></code>.</p>
</dd>
<dt>rows<span class="classifier">int or Iterable[int], optional</span></dt><dd><p>The row(s) of the ragged array to apply <code class="docutils literal notranslate"><span class="pre">func</span></code> to. If <code class="docutils literal notranslate"><span class="pre">rows</span></code> is
<code class="docutils literal notranslate"><span class="pre">None</span></code> (default), then <code class="docutils literal notranslate"><span class="pre">func</span></code> will be applied to all rows.</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>The ragged axis of the input arrays. Default is 0.</p>
</dd>
<dt>executor<span class="classifier">concurrent.futures.Executor, optional</span></dt><dd><p>Executor to use for concurrent execution. Default is <code class="docutils literal notranslate"><span class="pre">ThreadPoolExecutor</span></code>
with the default number of <code class="docutils literal notranslate"><span class="pre">max_workers</span></code>.
Another supported option is <code class="docutils literal notranslate"><span class="pre">ProcessPoolExecutor</span></code>.</p>
</dd>
<dt><a href="#id3"><span class="problematic" id="id4">**</span></a>kwargs<span class="classifier">dict</span></dt><dd><p>Additional keyword arguments to pass to <code class="docutils literal notranslate"><span class="pre">func</span></code>.</p>
</dd>
</dl>
</section>
<section id="returns">
<h2>Returns<a class="headerlink" href="#returns" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>out<span class="classifier">tuple[np.ndarray] or np.ndarray</span></dt><dd><p>Output array(s) from <code class="docutils literal notranslate"><span class="pre">func</span></code>.</p>
</dd>
</dl>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">#</a></h2>
<p>Using <code class="docutils literal notranslate"><span class="pre">velocity_from_position</span></code> with <code class="docutils literal notranslate"><span class="pre">apply_ragged</span></code>, calculate the velocities of
multiple particles, the coordinates of which are found in the ragged arrays x, y, and t
that share row sizes 2, 3, and 4:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">clouddrift.kinematics</span><span class="w"> </span><span class="kn">import</span> <span class="n">velocity_from_position</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">39</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u1</span><span class="p">,</span> <span class="n">v1</span> <span class="o">=</span> <span class="n">apply_ragged</span><span class="p">(</span><span class="n">velocity_from_position</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">t</span><span class="p">],</span> <span class="n">rowsize</span><span class="p">,</span> <span class="n">coord_system</span><span class="o">=</span><span class="s2">&quot;cartesian&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u1</span>
<span class="go">array([1., 1., 2., 2., 2., 3., 3., 3., 3.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span>
<span class="go">array([1., 1., 1., 1., 1., 1., 1., 1., 1.])</span>
</pre></div>
</div>
<p>To apply <code class="docutils literal notranslate"><span class="pre">func</span></code> to only a subset of rows, use the <code class="docutils literal notranslate"><span class="pre">rows</span></code> argument:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">u1</span><span class="p">,</span> <span class="n">v1</span> <span class="o">=</span> <span class="n">apply_ragged</span><span class="p">(</span><span class="n">velocity_from_position</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">t</span><span class="p">],</span> <span class="n">rowsize</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">coord_system</span><span class="o">=</span><span class="s2">&quot;cartesian&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u1</span>
<span class="go">array([1., 1.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span>
<span class="go">array([1., 1.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u1</span><span class="p">,</span> <span class="n">v1</span> <span class="o">=</span> <span class="n">apply_ragged</span><span class="p">(</span><span class="n">velocity_from_position</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">t</span><span class="p">],</span> <span class="n">rowsize</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">coord_system</span><span class="o">=</span><span class="s2">&quot;cartesian&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u1</span>
<span class="go">array([1., 1., 2., 2., 2.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span>
<span class="go">array([1., 1., 1., 1., 1.])</span>
</pre></div>
</div>
</section>
<section id="raises">
<h2>Raises<a class="headerlink" href="#raises" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>ValueError</dt><dd><p>If the sum of <code class="docutils literal notranslate"><span class="pre">rowsize</span></code> does not equal the length of <code class="docutils literal notranslate"><span class="pre">arrays</span></code>.</p>
</dd>
<dt>IndexError</dt><dd><p>If empty <code class="docutils literal notranslate"><span class="pre">arrays</span></code>.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clouddrift.ragged.chunk">
<span class="sig-prename descclassname"><span class="pre">clouddrift.ragged.</span></span><span class="sig-name descname"><span class="pre">chunk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">align</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'start'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/clouddrift/ragged.html#chunk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clouddrift.ragged.chunk" title="Link to this definition">#</a></dt>
<dd><p>Divide an array <code class="docutils literal notranslate"><span class="pre">x</span></code> into equal chunks of length <code class="docutils literal notranslate"><span class="pre">length</span></code>. The result
is a 2-dimensional NumPy array of shape <code class="docutils literal notranslate"><span class="pre">(num_chunks,</span> <span class="pre">length)</span></code>. The resulting
number of chunks is determined based on the length of <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">length</span></code>,
and <code class="docutils literal notranslate"><span class="pre">overlap</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">chunk</span></code> can be combined with <a class="reference internal" href="clouddrift.ragged.apply_ragged.html#clouddrift.ragged.apply_ragged" title="clouddrift.ragged.apply_ragged"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_ragged()</span></code></a> to chunk a ragged array.</p>
<section id="id5">
<h2>Parameters<a class="headerlink" href="#id5" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>x<span class="classifier">list or array-like</span></dt><dd><p>Array to divide into chunks.</p>
</dd>
<dt>length<span class="classifier">int</span></dt><dd><p>The length of each chunk.</p>
</dd>
<dt>overlap<span class="classifier">int, optional</span></dt><dd><p>The number of overlapping array elements across chunks. The default is 0.
Must be smaller than <code class="docutils literal notranslate"><span class="pre">length</span></code>. For example, if <code class="docutils literal notranslate"><span class="pre">length</span></code> is 4 and
<code class="docutils literal notranslate"><span class="pre">overlap</span></code> is 2, the chunks of <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4,</span> <span class="pre">5]</span></code> will be
<code class="docutils literal notranslate"><span class="pre">np.array([[0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3],</span> <span class="pre">[2,</span> <span class="pre">3,</span> <span class="pre">4,</span> <span class="pre">5]])</span></code>. Negative overlap can be used
to offset chunks by some number of elements. For example, if <code class="docutils literal notranslate"><span class="pre">length</span></code>
is 2 and <code class="docutils literal notranslate"><span class="pre">overlap</span></code> is -1, the chunks of <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4,</span> <span class="pre">5]</span></code> will
be <code class="docutils literal notranslate"><span class="pre">np.array([[0,</span> <span class="pre">1],</span> <span class="pre">[3,</span> <span class="pre">4]])</span></code>.</p>
</dd>
<dt>align<span class="classifier">str, optional [“start”, “middle”, “end”]</span></dt><dd><p>If the remainder of the length of <code class="docutils literal notranslate"><span class="pre">x</span></code> divided by the chunk <code class="docutils literal notranslate"><span class="pre">length</span></code> is a number
N different from zero, this parameter controls which part of the array will be kept
into the chunks. If <code class="docutils literal notranslate"><span class="pre">align=&quot;start&quot;</span></code>, the elements at the beginning of the array
will be part of the chunks and N points are discarded at the end. If <cite>align=”middle”</cite>,
floor(N/2) and ceil(N/2) elements will be discarded from the beginning and the end
of the array, respectively. If <code class="docutils literal notranslate"><span class="pre">align=&quot;end&quot;</span></code>, the elements at the end of the array
will be kept, and the <cite>N</cite> first elements are discarded. The default is “start”.</p>
</dd>
</dl>
</section>
<section id="id6">
<h2>Returns<a class="headerlink" href="#id6" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>np.ndarray</dt><dd><p>2-dimensional array of shape <code class="docutils literal notranslate"><span class="pre">(num_chunks,</span> <span class="pre">length)</span></code>.</p>
</dd>
</dl>
</section>
<section id="id7">
<h2>Examples<a class="headerlink" href="#id7" title="Link to this heading">#</a></h2>
<p>Chunk a simple list; this discards the end elements that exceed the last chunk:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">chunk</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">array([[1, 2],</span>
<span class="go">       [3, 4]])</span>
</pre></div>
</div>
<p>To discard the starting elements of the array instead, use <code class="docutils literal notranslate"><span class="pre">align=&quot;end&quot;</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">chunk</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">)</span>
<span class="go">array([[2, 3],</span>
<span class="go">       [4, 5]])</span>
</pre></div>
</div>
<p>To center the chunks by discarding both ends of the array, use <code class="docutils literal notranslate"><span class="pre">align=&quot;middle&quot;</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">chunk</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="mi">3</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
<span class="go">array([[2, 3, 4],</span>
<span class="go">       [5, 6, 7]])</span>
</pre></div>
</div>
<p>Specify <code class="docutils literal notranslate"><span class="pre">overlap</span></code> to get overlapping chunks:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">chunk</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="n">overlap</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([[1, 2],</span>
<span class="go">       [2, 3],</span>
<span class="go">       [3, 4],</span>
<span class="go">       [4, 5]])</span>
</pre></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">apply_ragged</span></code> to chunk a ragged array by providing the row sizes;
notice that you must pass the array to chunk as an array-like, not a list:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apply_ragged</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">rowsize</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">array([[1, 2],</span>
<span class="go">       [4, 5]])</span>
</pre></div>
</div>
</section>
<section id="id8">
<h2>Raises<a class="headerlink" href="#id8" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>ValueError</dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">length</span> <span class="pre">&lt;</span> <span class="pre">0</span></code>.</p>
</dd>
<dt>ValueError</dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">align</span> <span class="pre">not</span> <span class="pre">in</span> <span class="pre">[&quot;start&quot;,</span> <span class="pre">&quot;middle&quot;,</span> <span class="pre">&quot;end&quot;]</span></code>.</p>
</dd>
<dt>ZeroDivisionError</dt><dd><p>if <code class="docutils literal notranslate"><span class="pre">length</span> <span class="pre">==</span> <span class="pre">0</span></code>.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clouddrift.ragged.obs_index_to_row">
<span class="sig-prename descclassname"><span class="pre">clouddrift.ragged.</span></span><span class="sig-name descname"><span class="pre">obs_index_to_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rowsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="reference internal" href="../_modules/clouddrift/ragged.html#obs_index_to_row"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clouddrift.ragged.obs_index_to_row" title="Link to this definition">#</a></dt>
<dd><dl class="simple">
<dt>Obtain a list of row indices from a list of observation indices of a ragged array.</dt><dd><p>A ragged array is constituted of rows of different sizes indicated by <code class="docutils literal notranslate"><span class="pre">rowsize</span></code> and is
also constituted of a continuous sequence of observations with indices 0 to its length - 1.
This function allows the user to obtain the row index of a given observation given its index.
This answers the question: “In which row is an observation located?”</p>
</dd>
</dl>
<section id="id9">
<h2>Parameters<a class="headerlink" href="#id9" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>index<span class="classifier">int or list or np.ndarray</span></dt><dd><p>A integer observation index or a list of observation indices of a ragged array.</p>
</dd>
<dt>rowsize<span class="classifier">list or np.ndarray or xr.DataArray</span></dt><dd><p>A sequence of row sizes of a ragged array.</p>
</dd>
</dl>
</section>
<section id="id10">
<h2>Returns<a class="headerlink" href="#id10" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>list</dt><dd><p>A list of row indices.</p>
</dd>
</dl>
</section>
<section id="id11">
<h2>Examples<a class="headerlink" href="#id11" title="Link to this heading">#</a></h2>
<p>To obtain the row index of observation with index 5 within a ragged array of three consecutive
rows of sizes 2, 4, and 3:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obs_index_to_row</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">[1]</span>
</pre></div>
</div>
<p>To obtain the row indices of observations with indices 0, 2, and 4 within a ragged array of three
consecutive rows of sizes 2, 4, and 3:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obs_index_to_row</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">[0, 1, 1]</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clouddrift.ragged.prune">
<span class="sig-prename descclassname"><span class="pre">clouddrift.ragged.</span></span><span class="sig-name descname"><span class="pre">prune</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ragged</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Series</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rowsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Series</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_rowsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/clouddrift/ragged.html#prune"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clouddrift.ragged.prune" title="Link to this definition">#</a></dt>
<dd><p>Within a ragged array, removes arrays less than a specified row size.</p>
<section id="id12">
<h2>Parameters<a class="headerlink" href="#id12" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>ragged<span class="classifier">np.ndarray or pd.Series or xr.DataArray</span></dt><dd><p>A ragged array.</p>
</dd>
<dt>rowsize<span class="classifier">list or np.ndarray[int] or pd.Series or xr.DataArray[int]</span></dt><dd><p>The size of each row in the input ragged array.</p>
</dd>
<dt>min_rowsize :</dt><dd><p>The minimum row size that will be kept.</p>
</dd>
</dl>
</section>
<section id="id13">
<h2>Returns<a class="headerlink" href="#id13" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>tuple[np.ndarray, np.ndarray]</dt><dd><p>A tuple of ragged array and size of each row.</p>
</dd>
</dl>
</section>
<section id="id14">
<h2>Examples<a class="headerlink" href="#id14" title="Link to this heading">#</a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">clouddrift.ragged</span><span class="w"> </span><span class="kn">import</span> <span class="n">prune</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prune</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span><span class="mi">2</span><span class="p">)</span>
<span class="go">(array([ 1,  2,  3, -1, -2]), array([3, 2]))</span>
</pre></div>
</div>
</section>
<section id="id15">
<h2>Raises<a class="headerlink" href="#id15" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>ValueError</dt><dd><p>If the sum of <code class="docutils literal notranslate"><span class="pre">rowsize</span></code> does not equal the length of <code class="docutils literal notranslate"><span class="pre">arrays</span></code>.</p>
</dd>
<dt>IndexError</dt><dd><p>If empty <code class="docutils literal notranslate"><span class="pre">ragged</span></code>.</p>
</dd>
</dl>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading">#</a></h2>
<p><a class="reference internal" href="clouddrift.ragged.segment.html#clouddrift.ragged.segment" title="clouddrift.ragged.segment"><code class="xref py py-func docutils literal notranslate"><span class="pre">segment()</span></code></a>, <cite>chunk</cite></p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clouddrift.ragged.ragged_to_regular">
<span class="sig-prename descclassname"><span class="pre">clouddrift.ragged.</span></span><span class="sig-name descname"><span class="pre">ragged_to_regular</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ragged</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Series</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rowsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Series</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">nan</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/clouddrift/ragged.html#ragged_to_regular"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clouddrift.ragged.ragged_to_regular" title="Link to this definition">#</a></dt>
<dd><p>Convert a ragged array to a two-dimensional array such that each contiguous segment
of a ragged array is a row in the two-dimensional array. Each row of the two-dimensional
array is padded with NaNs as needed. The length of the first dimension of the output
array is the length of <code class="docutils literal notranslate"><span class="pre">rowsize</span></code>. The length of the second dimension is the maximum
element of <code class="docutils literal notranslate"><span class="pre">rowsize</span></code>.</p>
<p>Note: Although this function accepts parameters of type <code class="docutils literal notranslate"><span class="pre">xarray.DataArray</span></code>,
passing NumPy arrays is recommended for performance reasons.</p>
<section id="id16">
<h2>Parameters<a class="headerlink" href="#id16" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>ragged<span class="classifier">np.ndarray or pd.Series or xr.DataArray</span></dt><dd><p>A ragged array.</p>
</dd>
<dt>rowsize<span class="classifier">list or np.ndarray[int] or pd.Series or xr.DataArray[int]</span></dt><dd><p>The size of each row in the ragged array.</p>
</dd>
<dt>fill_value<span class="classifier">float, optional</span></dt><dd><p>Fill value to use for the trailing elements of each row of the resulting
regular array.</p>
</dd>
</dl>
</section>
<section id="id17">
<h2>Returns<a class="headerlink" href="#id17" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>np.ndarray</dt><dd><p>A two-dimensional array.</p>
</dd>
</dl>
</section>
<section id="id18">
<h2>Examples<a class="headerlink" href="#id18" title="Link to this heading">#</a></h2>
<p>By default, the fill value used is NaN:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ragged_to_regular</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]))</span>
<span class="go">array([[ 1.,  2.],</span>
<span class="go">       [ 3., nan],</span>
<span class="go">       [ 4.,  5.]])</span>
</pre></div>
</div>
<p>You can specify an alternative fill value:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ragged_to_regular</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">999</span><span class="p">)</span>
<span class="go">array([[  1,   2],</span>
<span class="go">       [  3, 999],</span>
<span class="go">       [  4,   5]])</span>
</pre></div>
</div>
</section>
<section id="id19">
<h2>See Also<a class="headerlink" href="#id19" title="Link to this heading">#</a></h2>
<p><a class="reference internal" href="clouddrift.ragged.regular_to_ragged.html#clouddrift.ragged.regular_to_ragged" title="clouddrift.ragged.regular_to_ragged"><code class="xref py py-func docutils literal notranslate"><span class="pre">regular_to_ragged()</span></code></a></p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clouddrift.ragged.regular_to_ragged">
<span class="sig-prename descclassname"><span class="pre">clouddrift.ragged.</span></span><span class="sig-name descname"><span class="pre">regular_to_ragged</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">nan</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/clouddrift/ragged.html#regular_to_ragged"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clouddrift.ragged.regular_to_ragged" title="Link to this definition">#</a></dt>
<dd><p>Convert a two-dimensional array to a ragged array. Fill values in the input array are
excluded from the output ragged array.</p>
<section id="id20">
<h2>Parameters<a class="headerlink" href="#id20" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>array<span class="classifier">np.ndarray</span></dt><dd><p>A two-dimensional array.</p>
</dd>
<dt>fill_value<span class="classifier">float, optional</span></dt><dd><p>Fill value used to determine the bounds of contiguous segments.</p>
</dd>
</dl>
</section>
<section id="id21">
<h2>Returns<a class="headerlink" href="#id21" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>tuple[np.ndarray, np.ndarray]</dt><dd><p>A tuple of the ragged array and the size of each row.</p>
</dd>
</dl>
</section>
<section id="id22">
<h2>Examples<a class="headerlink" href="#id22" title="Link to this heading">#</a></h2>
<p>By default, NaN values found in the input regular array are excluded from
the output ragged array:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">regular_to_ragged</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]))</span>
<span class="go">(array([1., 2., 3., 4., 5.]), array([2, 1, 2]))</span>
</pre></div>
</div>
<p>Alternatively, a different fill value can be specified:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">regular_to_ragged</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">999</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]),</span> <span class="n">fill_value</span><span class="o">=-</span><span class="mi">999</span><span class="p">)</span>
<span class="go">(array([1, 2, 3, 4, 5]), array([2, 1, 2]))</span>
</pre></div>
</div>
</section>
<section id="id23">
<h2>See Also<a class="headerlink" href="#id23" title="Link to this heading">#</a></h2>
<p><a class="reference internal" href="clouddrift.ragged.ragged_to_regular.html#clouddrift.ragged.ragged_to_regular" title="clouddrift.ragged.ragged_to_regular"><code class="xref py py-func docutils literal notranslate"><span class="pre">ragged_to_regular()</span></code></a></p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clouddrift.ragged.rowsize_to_index">
<span class="sig-prename descclassname"><span class="pre">clouddrift.ragged.</span></span><span class="sig-name descname"><span class="pre">rowsize_to_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rowsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/clouddrift/ragged.html#rowsize_to_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clouddrift.ragged.rowsize_to_index" title="Link to this definition">#</a></dt>
<dd><p>Convert a list of row sizes to a list of indices.</p>
<p>This function is typically used to obtain the indices of data rows organized
in a ragged array.</p>
<section id="id24">
<h2>Parameters<a class="headerlink" href="#id24" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>rowsize<span class="classifier">list or np.ndarray or xr.DataArray</span></dt><dd><p>A list of row sizes.</p>
</dd>
</dl>
</section>
<section id="id25">
<h2>Returns<a class="headerlink" href="#id25" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>np.ndarray</dt><dd><p>A list of indices.</p>
</dd>
</dl>
</section>
<section id="id26">
<h2>Examples<a class="headerlink" href="#id26" title="Link to this heading">#</a></h2>
<p>To obtain the indices within a ragged array of three consecutive rows of sizes 100, 202, and 53:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rowsize_to_index</span><span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="mi">202</span><span class="p">,</span> <span class="mi">53</span><span class="p">])</span>
<span class="go">array([  0, 100, 302, 355])</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clouddrift.ragged.segment">
<span class="sig-prename descclassname"><span class="pre">clouddrift.ragged.</span></span><span class="sig-name descname"><span class="pre">segment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">timedelta64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">timedelta</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Timedelta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rowsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/clouddrift/ragged.html#segment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clouddrift.ragged.segment" title="Link to this definition">#</a></dt>
<dd><p>Divide an array into segments based on a tolerance value.</p>
<section id="id27">
<h2>Parameters<a class="headerlink" href="#id27" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>x<span class="classifier">list, np.ndarray, or xr.DataArray</span></dt><dd><p>An array to divide into segment.</p>
</dd>
<dt>tolerance<span class="classifier">float, np.timedelta64, timedelta, pd.Timedelta</span></dt><dd><p>The maximum signed difference between consecutive points in a segment.
The array x will be segmented wherever differences exceed the tolerance.</p>
</dd>
<dt>rowsize<span class="classifier">np.ndarray[int], optional</span></dt><dd><p>The size of rows if x is originally a ragged array. If present, x will be
divided both by gaps that exceed the tolerance, and by the original rows
of the ragged array.</p>
</dd>
</dl>
</section>
<section id="id28">
<h2>Returns<a class="headerlink" href="#id28" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>np.ndarray[int]</dt><dd><p>An array of row sizes that divides the input array into segments.</p>
</dd>
</dl>
</section>
<section id="id29">
<h2>Examples<a class="headerlink" href="#id29" title="Link to this heading">#</a></h2>
<p>The simplest use of <code class="docutils literal notranslate"><span class="pre">segment</span></code> is to provide a tolerance value that is
used to divide an array into segments:
&gt;&gt;&gt; from clouddrift.ragged import segment, subset
&gt;&gt;&gt; import numpy as np</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">segment</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="go">array([1, 3, 2, 4, 1])</span>
</pre></div>
</div>
<p>If the array is already previously segmented (e.g. multiple rows in
a ragged array), then the <code class="docutils literal notranslate"><span class="pre">rowsize</span></code> argument can be used to preserve
the original segments:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rowsize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">segment</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">rowsize</span><span class="p">)</span>
<span class="go">array([1, 2, 1, 1, 1, 4, 1])</span>
</pre></div>
</div>
<p>The tolerance can also be negative. In this case, the input array is
segmented where the negative difference exceeds the negative
value of the tolerance, i.e. where <code class="docutils literal notranslate"><span class="pre">x[n+1]</span> <span class="pre">-</span> <span class="pre">x[n]</span> <span class="pre">&lt;</span> <span class="pre">-tolerance</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">segment</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">)</span>
<span class="go">array([3, 3])</span>
</pre></div>
</div>
<p>To segment an array for both positive and negative gaps, invoke the function
twice, once for a positive tolerance and once for a negative tolerance.
The result of the first invocation can be passed as the <code class="docutils literal notranslate"><span class="pre">rowsize</span></code> argument
to the first <code class="docutils literal notranslate"><span class="pre">segment</span></code> invocation:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">segment</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">rowsize</span><span class="o">=</span><span class="n">segment</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">))</span>
<span class="go">array([2, 2, 2, 2])</span>
</pre></div>
</div>
<p>If the input array contains time objects, the tolerance must be a time interval:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s2">&quot;2023-01-01&quot;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s2">&quot;2023-01-02&quot;</span><span class="p">),</span>
<span class="gp">... </span>              <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s2">&quot;2023-01-03&quot;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s2">&quot;2023-02-01&quot;</span><span class="p">),</span>
<span class="gp">... </span>              <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s2">&quot;2023-02-02&quot;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">segment</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">))</span>
<span class="go">array([3, 2])</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clouddrift.ragged.subset">
<span class="sig-prename descclassname"><span class="pre">clouddrift.ragged.</span></span><span class="sig-name descname"><span class="pre">subset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">criteria</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_var_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'id'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rowsize_var_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'rowsize'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_dim_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'rows'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obs_dim_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'obs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span></span></span><a class="reference internal" href="../_modules/clouddrift/ragged.html#subset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clouddrift.ragged.subset" title="Link to this definition">#</a></dt>
<dd><p>Subset a ragged array xarray dataset as a function of one or more criteria.
The criteria are passed with a dictionary, where a dictionary key
is a variable to subset and the associated dictionary value is either a range
(valuemin, valuemax), a list [value1, value2, valueN], a single value, or a
masking function applied to any variable of the dataset.</p>
<p>This function needs to know the names of the dimensions of the ragged array dataset
(<cite>row_dim_name</cite> and <cite>obs_dim_name</cite>), and the name of the rowsize variable (<cite>rowsize_var_name</cite>).
Default values corresponds to the clouddrift convention (“rows”, “obs”, and “rowsize”) but should
be changed as needed.</p>
<section id="id30">
<h2>Parameters<a class="headerlink" href="#id30" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>ds<span class="classifier">xr.Dataset</span></dt><dd><p>Xarray dataset composed of ragged arrays.</p>
</dd>
<dt>criteria<span class="classifier">dict</span></dt><dd><p>Dictionary containing the variables (as keys) and the ranges/values/functions (as values) to subset.</p>
</dd>
<dt>id_var_name<span class="classifier">str, optional</span></dt><dd><p>Name of the variable with dimension <cite>row_dim_name</cite> containing the identification number of the
rows (default is “id”).</p>
</dd>
<dt>rowsize_var_name<span class="classifier">str, optional</span></dt><dd><p>Name of the variable containing the number of observations per row (default is “rowsize”).</p>
</dd>
<dt>row_dim_name<span class="classifier">str, optional</span></dt><dd><p>Name of the row dimension (default is “rows”).</p>
</dd>
<dt>obs_dim_name<span class="classifier">str, optional</span></dt><dd><p>Name of the observation dimension (default is “obs”).</p>
</dd>
<dt>full_rows<span class="classifier">bool, optional</span></dt><dd><p>If True, the function returns complete rows for which the criteria
are matched at least once. Default is False which means that only segments matching the criteria
are returned when filtering along the observation dimension.</p>
</dd>
</dl>
</section>
<section id="id31">
<h2>Returns<a class="headerlink" href="#id31" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>xr.Dataset</dt><dd><p>Subset xarray dataset matching the criterion(a).</p>
</dd>
</dl>
</section>
<section id="id32">
<h2>Examples<a class="headerlink" href="#id32" title="Link to this heading">#</a></h2>
<p>Criteria are combined on any data (with dimension “obs”) or metadata (with dimension “rows”) variables
part of the Dataset. The following examples are based on NOAA GDP datasets which can be accessed with the
<code class="docutils literal notranslate"><span class="pre">clouddrift.datasets</span></code> module. In these datasets, each row of the ragged arrays corresponds to the data from
a single drifter trajectory and the <cite>row_dim_name</cite> is “traj” and the <cite>obs_dim_name</cite> is “obs”.</p>
<p>Retrieve a region, like the Gulf of Mexico, using ranges of latitude and longitude:
&gt;&gt;&gt; from clouddrift.datasets import gdp6h
&gt;&gt;&gt; from clouddrift.ragged import subset
&gt;&gt;&gt; import numpy as np</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span> <span class="o">=</span> <span class="n">gdp6h</span><span class="p">()</span>
<span class="gp">...</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">subset</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;lat&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span> <span class="s2">&quot;lon&quot;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">98</span><span class="p">,</span> <span class="o">-</span><span class="mi">78</span><span class="p">)},</span> <span class="n">row_dim_name</span><span class="o">=</span><span class="s2">&quot;traj&quot;</span><span class="p">)</span>
<span class="go">&lt;xarray.Dataset&gt; ...</span>
<span class="go">...</span>
</pre></div>
</div>
<p>The parameter <cite>full_rows</cite> can be used to retrieve trajectories passing through a region, for example all trajectories passing through the Gulf of Mexico:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">subset</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;lat&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span> <span class="s2">&quot;lon&quot;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">98</span><span class="p">,</span> <span class="o">-</span><span class="mi">78</span><span class="p">)},</span> <span class="n">full_rows</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">row_dim_name</span><span class="o">=</span><span class="s2">&quot;traj&quot;</span><span class="p">)</span>
<span class="go">&lt;xarray.Dataset&gt; ...</span>
<span class="go">...</span>
</pre></div>
</div>
<p>Retrieve drogued trajectory segments:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">subset</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;drogue_status&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span> <span class="n">row_dim_name</span><span class="o">=</span><span class="s2">&quot;traj&quot;</span><span class="p">)</span>
<span class="go">&lt;xarray.Dataset&gt; ...</span>
<span class="go">Dimensions:                (traj: ..., obs: ...)</span>
<span class="go">Coordinates:</span>
<span class="go">    id                     (traj) int64 ...</span>
<span class="go">    time                   (obs) datetime64[ns] ...</span>
<span class="go">...</span>
</pre></div>
</div>
<p>Retrieve trajectory segments with temperature higher than 25°C (303.15K):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">subset</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;temp&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">303.15</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">)},</span> <span class="n">row_dim_name</span><span class="o">=</span><span class="s2">&quot;traj&quot;</span><span class="p">)</span>
<span class="go">&lt;xarray.Dataset&gt; ...</span>
<span class="go">...</span>
</pre></div>
</div>
<p>You can use the same approach to return only the trajectories that are
shorter than some number of observations (similar to <a class="reference internal" href="clouddrift.ragged.prune.html#clouddrift.ragged.prune" title="clouddrift.ragged.prune"><code class="xref py py-func docutils literal notranslate"><span class="pre">prune()</span></code></a> but for
the entire dataset):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">subset</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;rowsize&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)},</span> <span class="n">row_dim_name</span><span class="o">=</span><span class="s2">&quot;traj&quot;</span><span class="p">)</span>
<span class="go">&lt;xarray.Dataset&gt; ...</span>
<span class="go">...</span>
</pre></div>
</div>
<p>Retrieve specific drifters using their IDs:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">subset</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2578</span><span class="p">,</span> <span class="mi">2582</span><span class="p">,</span> <span class="mi">2583</span><span class="p">]},</span> <span class="n">row_dim_name</span><span class="o">=</span><span class="s2">&quot;traj&quot;</span><span class="p">)</span>
<span class="go">&lt;xarray.Dataset&gt; ...</span>
<span class="go">...</span>
</pre></div>
</div>
<p>Sometimes, you may want to retrieve specific rows of a ragged array.
You can do that by filtering along the trajectory dimension directly, since
this one corresponds to row numbers:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subset</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;traj&quot;</span><span class="p">:</span> <span class="n">rows</span><span class="p">},</span> <span class="n">row_dim_name</span><span class="o">=</span><span class="s2">&quot;traj&quot;</span><span class="p">)</span>
<span class="go">&lt;xarray.Dataset&gt; ...</span>
<span class="go">...</span>
</pre></div>
</div>
<p>Retrieve a specific time period:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">subset</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s2">&quot;2000-01-01&quot;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s2">&quot;2020-01-31&quot;</span><span class="p">))},</span> <span class="n">row_dim_name</span><span class="o">=</span><span class="s2">&quot;traj&quot;</span><span class="p">)</span>
<span class="go">&lt;xarray.Dataset&gt; ...</span>
<span class="go">...</span>
</pre></div>
</div>
<p>Note that to subset time variable, the range has to be defined as a function
type of the variable. By default, <code class="docutils literal notranslate"><span class="pre">xarray</span></code> uses <code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code> to
represent datetime data. If the datetime data is a <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code>, or
<code class="docutils literal notranslate"><span class="pre">pd.Timestamp</span></code>, the range would have to be defined accordingly.</p>
<p>Those criteria can also be combined:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">subset</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;lat&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span> <span class="s2">&quot;lon&quot;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">98</span><span class="p">,</span> <span class="o">-</span><span class="mi">78</span><span class="p">),</span> <span class="s2">&quot;drogue_status&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;temp&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">303.15</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">),</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s2">&quot;2000-01-01&quot;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s2">&quot;2020-01-31&quot;</span><span class="p">))},</span> <span class="n">row_dim_name</span><span class="o">=</span><span class="s2">&quot;traj&quot;</span><span class="p">)</span>
<span class="go">&lt;xarray.Dataset&gt; ...</span>
<span class="go">...</span>
</pre></div>
</div>
<p>You can also use a function to filter the data. For example, retrieve every other observation
of each trajectory:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">func</span> <span class="o">=</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">arr</span><span class="p">:</span> <span class="p">((</span><span class="n">arr</span> <span class="o">-</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subset</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">func</span><span class="p">},</span> <span class="n">row_dim_name</span><span class="o">=</span><span class="s2">&quot;traj&quot;</span><span class="p">)</span>
<span class="go">&lt;xarray.Dataset&gt; ...</span>
<span class="go">...</span>
</pre></div>
</div>
<p>The filtering function can accept several input variables passed as a tuple. For example, retrieve
drifters released in the Mediterranean Sea, but exclude those released in the Bay of Biscay and the Black Sea:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">mediterranean_mask</span><span class="p">(</span><span class="n">lon</span><span class="p">:</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">,</span> <span class="n">lat</span><span class="p">:</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">:</span>
<span class="gp">... </span>   <span class="c1"># Mediterranean Sea bounding box</span>
<span class="gp">... </span>   <span class="n">in_med</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="o">-</span><span class="mf">6.0327</span> <span class="o">&lt;=</span> <span class="n">lon</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">lon</span> <span class="o">&lt;=</span> <span class="mf">36.2173</span><span class="p">,</span>
<span class="gp">... </span>                                                          <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="mf">30.2639</span> <span class="o">&lt;=</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lat</span> <span class="o">&lt;=</span> <span class="mf">45.7833</span><span class="p">)))</span>
<span class="gp">... </span>   <span class="c1"># Bay of Biscay</span>
<span class="gp">... </span>   <span class="n">in_biscay</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">lon</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">0.1462</span><span class="p">,</span> <span class="n">lat</span> <span class="o">&gt;=</span> <span class="mf">43.2744</span><span class="p">)</span>
<span class="gp">... </span>   <span class="c1"># Black Sea</span>
<span class="gp">... </span>   <span class="n">in_blacksea</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">lon</span> <span class="o">&gt;=</span> <span class="mf">27.4437</span><span class="p">,</span> <span class="n">lat</span> <span class="o">&gt;=</span> <span class="mf">40.9088</span><span class="p">)</span>
<span class="gp">... </span>   <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">in_med</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_not</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">logical_or</span><span class="p">(</span><span class="n">in_biscay</span><span class="p">,</span> <span class="n">in_blacksea</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subset</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="p">{(</span><span class="s2">&quot;start_lon&quot;</span><span class="p">,</span> <span class="s2">&quot;start_lat&quot;</span><span class="p">):</span> <span class="n">mediterranean_mask</span><span class="p">},</span> <span class="n">row_dim_name</span><span class="o">=</span><span class="s2">&quot;traj&quot;</span><span class="p">)</span>
<span class="go">&lt;xarray.Dataset&gt; Size: ...</span>
<span class="go">Dimensions:                (traj: ..., obs: ...)</span>
<span class="go">Coordinates:</span>
<span class="go">    id                     (traj) int64 ...</span>
<span class="go">    time                   (obs) datetime64[ns] ...</span>
<span class="go">...</span>
</pre></div>
</div>
</section>
<section id="id33">
<h2>Raises<a class="headerlink" href="#id33" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>ValueError</dt><dd><p>If one of the variable in a criterion is not found in the Dataset.</p>
</dd>
<dt>TypeError</dt><dd><p>If one of the <cite>criteria</cite> key is a tuple while its associated value is not a <cite>Callable</cite> criterion.</p>
</dd>
<dt>TypeError</dt><dd><p>If variables of a <cite>criterion</cite> key associated to a <cite>Callable</cite> do not share the same dimension.</p>
</dd>
</dl>
</section>
<section id="id34">
<h2>See Also<a class="headerlink" href="#id34" title="Link to this heading">#</a></h2>
<p><a class="reference internal" href="clouddrift.ragged.apply_ragged.html#clouddrift.ragged.apply_ragged" title="clouddrift.ragged.apply_ragged"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_ragged()</span></code></a></p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clouddrift.ragged.unpack">
<span class="sig-prename descclassname"><span class="pre">clouddrift.ragged.</span></span><span class="sig-name descname"><span class="pre">unpack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ragged_array</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rowsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/clouddrift/ragged.html#unpack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clouddrift.ragged.unpack" title="Link to this definition">#</a></dt>
<dd><p>Unpack a ragged array into a list of regular arrays.</p>
<p>Unpacking a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> ragged array is about 2 orders of magnitude
faster than unpacking an <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code> ragged array, so unless you need a
<code class="docutils literal notranslate"><span class="pre">DataArray</span></code> as the result, we recommend passing <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> as input.</p>
<section id="id35">
<h2>Parameters<a class="headerlink" href="#id35" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>ragged_array<span class="classifier">array-like</span></dt><dd><p>A ragged_array to unpack</p>
</dd>
<dt>rowsize<span class="classifier">array-like</span></dt><dd><p>An array of integers whose values is the size of each row in the ragged
array</p>
</dd>
<dt>rows<span class="classifier">int or Iterable[int], optional</span></dt><dd><p>A row or list of rows to unpack. Default is None, which unpacks all rows.</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>The axis along which to unpack the ragged array. Default is 0.</p>
</dd>
</dl>
</section>
<section id="id36">
<h2>Returns<a class="headerlink" href="#id36" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>list</dt><dd><p>A list of array-likes with sizes that correspond to the values in
rowsize, and types that correspond to the type of ragged_array</p>
</dd>
</dl>
</section>
<section id="id37">
<h2>Examples<a class="headerlink" href="#id37" title="Link to this heading">#</a></h2>
<p>Unpacking longitude arrays from a ragged Xarray Dataset:
&gt;&gt;&gt; from clouddrift.ragged import unpack
&gt;&gt;&gt; from clouddrift.datasets import gdp6h</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span> <span class="o">=</span> <span class="n">gdp6h</span><span class="p">()</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lon</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;rowsize&quot;</span><span class="p">])</span> <span class="c1"># return a list[xr.DataArray] (slower)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lon</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;rowsize&quot;</span><span class="p">])</span> <span class="c1"># return a list[np.ndarray] (faster)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first_lon</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;rowsize&quot;</span><span class="p">],</span> <span class="n">rows</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># return only the first row</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first_two_lons</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;rowsize&quot;</span><span class="p">],</span> <span class="n">rows</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span> <span class="c1"># return first two rows</span>
</pre></div>
</div>
<p>Looping over trajectories in a ragged Xarray Dataset to compute velocities
for each:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">clouddrift.kinematics</span><span class="w"> </span><span class="kn">import</span> <span class="n">velocity_from_position</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">time</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">unpack</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;rowsize&quot;</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="n">unpack</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;rowsize&quot;</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="n">unpack</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ds</span><span class="p">[</span><span class="s2">&quot;rowsize&quot;</span><span class="p">])</span>
<span class="gp">... </span><span class="p">)):</span>
<span class="gp">... </span>    <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">velocity_from_position</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="clouddrift.plotting.plot_ragged.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">clouddrift.plotting.plot_ragged</p>
      </div>
    </a>
    <a class="right-next"
       href="clouddrift.ragged.apply_ragged.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">clouddrift.ragged.apply_ragged</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.apply_ragged"><code class="docutils literal notranslate"><span class="pre">apply_ragged()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.chunk"><code class="docutils literal notranslate"><span class="pre">chunk()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.obs_index_to_row"><code class="docutils literal notranslate"><span class="pre">obs_index_to_row()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.prune"><code class="docutils literal notranslate"><span class="pre">prune()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.ragged_to_regular"><code class="docutils literal notranslate"><span class="pre">ragged_to_regular()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.regular_to_ragged"><code class="docutils literal notranslate"><span class="pre">regular_to_ragged()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.rowsize_to_index"><code class="docutils literal notranslate"><span class="pre">rowsize_to_index()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.segment"><code class="docutils literal notranslate"><span class="pre">segment()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.subset"><code class="docutils literal notranslate"><span class="pre">subset()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clouddrift.ragged.unpack"><code class="docutils literal notranslate"><span class="pre">unpack()</span></code></a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Philippe Miron
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022-2023, CloudDrift.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>